<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Dashboard ‚Äì AfterHeal</title>
    <meta name="description"
        content="Track your medication adherence, appointments, missed-dose alerts, and daily health summary.">
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/dashboard.css">
    <style>
        /* ‚îÄ‚îÄ Patient-specific extras ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

        /* Overdue medication card highlight */
        .med-overdue {
            border-left: 3px solid var(--poor) !important;
        }

        /* Overview alert banner */
        .overview-alert-banner {
            display: none;
            /* shown by JS when doses are overdue */
            align-items: center;
            gap: 14px;
            background: linear-gradient(135deg, #FFF3CD, #FFF9E6);
            border: 1.5px solid #F0A500;
            border-radius: var(--radius);
            padding: 16px 20px;
            margin-bottom: 20px;
            color: #7D5A00;
            font-size: 0.9rem;
            line-height: 1.45;
        }

        /* Filter bar */
        .filter-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 16px;
            padding: 12px 16px;
            background: var(--surface2);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
        }

        .filter-bar label {
            font-size: 0.82rem;
            color: var(--text-muted);
            font-weight: 600;
            white-space: nowrap;
        }

        .filter-bar select {
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            padding: 6px 10px;
            border: 1px solid var(--border);
            background: var(--surface);
            color: var(--text-primary);
            min-width: 180px;
        }

        /* Notification bell in topbar */
        .notif-bell-wrap {
            position: relative;
            display: inline-flex;
        }

        .notif-bell-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.4rem;
            padding: 4px 6px;
            border-radius: var(--radius-sm);
            transition: background 0.15s;
            position: relative;
        }

        .notif-bell-btn:hover {
            background: var(--surface2);
        }

        .notif-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--poor);
            color: #fff;
            font-size: 0.62rem;
            font-weight: 800;
            border-radius: 50%;
            width: 17px;
            height: 17px;
            display: none;
            align-items: center;
            justify-content: center;
        }

        /* Nav badge (Alerts nav item) */
        .nav-notif-badge {
            display: none;
            background: var(--poor);
            color: #fff;
            font-size: 0.62rem;
            font-weight: 800;
            border-radius: 10px;
            padding: 1px 5px;
            margin-left: 6px;
        }

        /* Notification feed */
        .notif-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 14px 16px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            margin-bottom: 8px;
            transition: background 0.15s;
        }

        .notif-unread {
            background: linear-gradient(135deg, #EBF5FF, #F8FBFF);
        }

        .notif-read {
            background: var(--surface2);
            opacity: 0.75;
        }

        .notif-icon {
            font-size: 1.4rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .notif-body {
            flex: 1;
            min-width: 0;
        }

        .notif-msg {
            font-size: 0.88rem;
            line-height: 1.45;
            margin-bottom: 6px;
        }

        .notif-meta {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Emergency contact cards */
        .ec-card {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--surface);
            margin-bottom: 10px;
            transition: box-shadow 0.15s;
        }

        .ec-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .ec-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .ec-info {
            flex: 1;
        }

        .ec-name {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 4px;
        }

        .ec-meta {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }
    </style>
</head>

<body class="theme-patient">
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <div class="dashboard-shell">
        <!-- ‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon theme-patient">üè•</div>
                <div>
                    <div class="sidebar-logo-text">AfterHeal</div>
                    <div class="sidebar-logo-sub">Patient Portal</div>
                </div>
            </div>
            <div class="sidebar-user">
                <div class="sidebar-avatar" id="sidebar-avatar" style="background:var(--patient-color)">A</div>
                <div>
                    <div class="sidebar-user-name" id="sidebar-user-name">Patient</div>
                    <div class="sidebar-user-role" id="sidebar-user-role">patient</div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-group-label">My Health</div>
                <button class="nav-link active" data-section="section-overview">
                    <span class="nav-icon">üè†</span> Overview
                </button>
                <button class="nav-link" data-section="section-medications">
                    <span class="nav-icon">üíä</span> Medications
                </button>
                <button class="nav-link" data-section="section-appointments">
                    <span class="nav-icon">üìÖ</span> Appointments
                </button>
                <button class="nav-link" data-section="section-alerts">
                    <span class="nav-icon">üîî</span> Alerts
                    <span class="nav-notif-badge" id="nav-notif-badge"></span>
                </button>
                <button class="nav-link" data-section="section-summary">
                    <span class="nav-icon">üìä</span> Daily Summary
                </button>
            </nav>
            <div class="sidebar-footer">
                <button class="logout-btn"><span>üö™</span> Logout</button>
            </div>
        </aside>

        <!-- ‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="main-content">
            <header class="topbar">
                <div class="topbar-left">
                    <button class="hamburger-btn" id="hamburger-btn" aria-label="Toggle menu">‚ò∞</button>
                    <div>
                        <div class="topbar-title" id="topbar-greeting">Welcome üëã</div>
                        <div class="topbar-subtitle">Patient Dashboard</div>
                    </div>
                </div>
                <div class="topbar-right">
                    <div class="topbar-date" id="topbar-date"></div>
                    <!-- Notification bell -->
                    <div class="notif-bell-wrap">
                        <button class="notif-bell-btn" id="notif-bell-btn" aria-label="Notifications"
                            onclick="document.querySelector('[data-section=section-alerts]').click()"
                            title="View missed-dose alerts">
                            üîî
                            <span class="notif-badge" id="notif-badge"></span>
                        </button>
                    </div>
                    <button class="btn btn-outline btn-sm logout-btn">Logout</button>
                </div>
            </header>

            <main class="page-content">

                <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          ‚îÄ‚îÄ SECTION: OVERVIEW
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                <section class="dashboard-section" id="section-overview">
                    <div class="page-header">
                        <h2>My Health Overview</h2>
                        <p>Your medication adherence and appointment summary at a glance.</p>
                    </div>

                    <!-- Missed-dose alert banner (shown by JS when overdue doses exist) -->
                    <div class="overview-alert-banner" id="overview-alert-banner"></div>

                    <!-- Adherence hero -->
                    <div class="adherence-summary">
                        <div class="pct-big" id="adherence-pct-big">--</div>
                        <div class="pct-label">Overall Adherence Rate</div>
                        <div class="status-pill">Calculating‚Ä¶</div>
                    </div>

                    <!-- Stat cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-green">‚úÖ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-today-taken">0</div>
                                <div class="stat-label">Doses Taken Today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-orange">‚è∞</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-today-upcoming">0</div>
                                <div class="stat-label">Upcoming Today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-red" style="background:#FFE5E5">‚ùå</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-today-missed" style="color:var(--poor)">0</div>
                                <div class="stat-label">Missed Today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-purple">üìÖ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-upcoming">0</div>
                                <div class="stat-label">Upcoming Appointments</div>
                            </div>
                        </div>
                    </div>

                    <!-- Adherence insight -->
                    <div class="card-flat mt-16">
                        <h4 class="mb-8">üí° Adherence Insight</h4>
                        <span id="adherence-insight" class="badge badge-primary">Calculating‚Ä¶</span>
                    </div>
                </section>

                <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          ‚îÄ‚îÄ SECTION: MEDICATIONS (with doctor filter)
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                <section class="dashboard-section" id="section-medications" style="display:none">
                    <div class="page-header">
                        <h2>My Medications</h2>
                        <p>All prescribed medications. Mark each dose as taken. Filter by prescribing doctor.</p>
                    </div>

                    <!-- Adherence bar -->
                    <div class="card-flat mb-16">
                        <div class="flex-between mb-8">
                            <h4>Overall Adherence</h4>
                            <span id="stat-adherence" class="fw-700 text-primary-c">--%</span>
                        </div>
                        <div class="progress-wrap">
                            <div class="progress-bar progress-good" id="adh-bar-main" style="width:0%"></div>
                        </div>
                    </div>

                    <!-- Doctor filter bar -->
                    <div class="filter-bar" id="med-filter-bar">
                        <label for="med-doctor-filter">üè• Filter by Doctor:</label>
                        <select id="med-doctor-filter" onchange="onMedDoctorFilterChange(this.value)">
                            <option value="">All Doctors</option>
                        </select>
                        <button class="btn btn-ghost btn-sm"
                            onclick="document.getElementById('med-doctor-filter').value=''; onMedDoctorFilterChange('')">
                            Clear Filter
                        </button>
                    </div>

                    <!-- Medication list -->
                    <div id="med-list">
                        <div class="empty-state">
                            <div class="empty-icon">üíä</div>
                            <p>Loading medications‚Ä¶</p>
                        </div>
                    </div>
                </section>

                <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          ‚îÄ‚îÄ SECTION: APPOINTMENTS (with doctor filter + categories)
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                <section class="dashboard-section" id="section-appointments" style="display:none">
                    <div class="page-header">
                        <h2>My Appointments</h2>
                        <p>Upcoming, missed, and completed appointments. Filter by doctor.</p>
                    </div>

                    <!-- Stats row -->
                    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-bottom:20px">
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-blue">üìÖ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-upcoming2">0</div>
                                <div class="stat-label">Upcoming</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-orange">‚ö†Ô∏è</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-missed">0</div>
                                <div class="stat-label">Missed</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-green">‚úÖ</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-attended">0</div>
                                <div class="stat-label">Attended</div>
                            </div>
                        </div>
                    </div>

                    <!-- Doctor filter bar -->
                    <div class="filter-bar" id="appt-filter-bar">
                        <label for="appt-doctor-filter">üë®‚Äç‚öïÔ∏è Filter by Doctor:</label>
                        <select id="appt-doctor-filter" onchange="onApptDoctorFilterChange(this.value)">
                            <option value="">All Doctors</option>
                        </select>
                        <button class="btn btn-ghost btn-sm"
                            onclick="document.getElementById('appt-doctor-filter').value=''; onApptDoctorFilterChange('')">
                            Clear Filter
                        </button>
                    </div>

                    <!-- Appointment tabs -->
                    <div class="tab-bar" data-tab-container>
                        <button class="tab-btn active" data-tab="tab-upcoming">üìÖ Upcoming</button>
                        <button class="tab-btn" data-tab="tab-missed">‚ö†Ô∏è Missed</button>
                        <button class="tab-btn" data-tab="tab-attended">‚úÖ Attended</button>
                    </div>
                    <div class="tab-panel active" id="tab-upcoming">
                        <div id="upcoming-appts"></div>
                    </div>
                    <div class="tab-panel" id="tab-missed">
                        <div id="missed-appts"></div>
                    </div>
                    <div class="tab-panel" id="tab-attended">
                        <div id="attended-appts"></div>
                    </div>
                </section>

                <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          ‚îÄ‚îÄ SECTION: ALERTS (Missed Dose + Emergency Contacts)
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                <section class="dashboard-section" id="section-alerts" style="display:none">
                    <div class="page-header">
                        <h2>Alerts &amp; Notifications</h2>
                        <p>Missed dose alerts with simulated SMS emergency notifications.</p>
                    </div>

                    <!-- Stats row -->
                    <div class="stats-grid" style="margin-bottom:20px">
                        <div class="stat-card">
                            <div class="stat-icon stat-icon-orange">üîî</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-notif-count">0</div>
                                <div class="stat-label">Total Alerts</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background:#FFE5E5">üìû</div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-ec-count">‚Äî</div>
                                <div class="stat-label">Emergency Contacts</div>
                            </div>
                        </div>
                    </div>

                    <!-- Notification feed card -->
                    <div class="card" style="margin-bottom:22px">
                        <div
                            style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;flex-wrap:wrap;gap:8px">
                            <h3>üîî Notification Feed</h3>
                            <div style="display:flex;gap:8px">
                                <button id="btn-mark-all-read" class="btn btn-ghost btn-sm">‚úì Mark All Read</button>
                                <button id="btn-clear-notifs" class="btn btn-danger btn-sm">üóë Clear All</button>
                            </div>
                        </div>
                        <div id="notif-list">
                            <div class="empty-state">
                                <div class="empty-icon">üîî</div>
                                <p>No notifications yet.<br>Missed doses will appear here automatically.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency contacts card -->
                    <div class="card">
                        <h3 style="margin-bottom:16px">üìû Emergency Contacts</h3>
                        <p style="font-size:0.85rem;color:var(--text-muted);margin-bottom:16px">
                            These contacts receive simulated SMS alerts when you miss a dose.
                        </p>

                        <div id="ec-list" style="margin-bottom:20px"></div>

                        <!-- Add contact form -->
                        <div style="border-top:1px solid var(--border);padding-top:16px">
                            <h4 style="margin-bottom:14px">‚ûï Add Emergency Contact</h4>
                            <form id="ec-add-form" novalidate>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px">
                                    <div class="form-group">
                                        <label class="form-label">Full Name <span class="text-poor">*</span></label>
                                        <input id="ec-name" type="text" class="form-control"
                                            placeholder="e.g. Mary Johnson" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Relation</label>
                                        <input id="ec-relation" type="text" class="form-control"
                                            placeholder="e.g. Mother, Spouse">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Phone Number <span class="text-poor">*</span></label>
                                    <input id="ec-phone" type="tel" class="form-control" placeholder="e.g. +1-555-0101"
                                        required>
                                </div>
                                <button type="submit" class="btn btn-primary">üìû Add Contact</button>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
          ‚îÄ‚îÄ SECTION: DAILY SUMMARY
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                <section class="dashboard-section" id="section-summary" style="display:none">
                    <div class="page-header">
                        <h2>Daily Summary</h2>
                        <p>Your adherence breakdown and personalised health insights.</p>
                    </div>

                    <div class="adherence-summary">
                        <div class="pct-big" id="adh-pct-big2">--%</div>
                        <div class="pct-label">Overall Adherence</div>
                        <div class="status-pill" id="summary-status-pill">Calculating‚Ä¶</div>
                    </div>

                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px">
                        <div class="card">
                            <h4 class="mb-12">Today's Progress</h4>
                            <div style="display:flex;justify-content:space-between;margin-bottom:8px">
                                <span style="font-size:0.88rem;color:var(--text-secondary)">Doses Taken</span>
                                <span class="fw-700 text-good" id="sum-taken">-</span>
                            </div>
                            <div style="display:flex;justify-content:space-between;margin-bottom:8px">
                                <span style="font-size:0.88rem;color:var(--text-secondary)">Doses Missed</span>
                                <span class="fw-700 text-poor" id="sum-missed">-</span>
                            </div>
                            <div style="display:flex;justify-content:space-between">
                                <span style="font-size:0.88rem;color:var(--text-secondary)">Upcoming</span>
                                <span class="fw-700 text-moderate" id="sum-upcoming">-</span>
                            </div>
                        </div>
                        <div class="card">
                            <h4 class="mb-12">Status Indicator</h4>
                            <div style="font-size:3rem;text-align:center;margin-bottom:8px" id="sum-emoji">üìä</div>
                            <div style="text-align:center;font-weight:700;font-size:1.1rem" id="sum-label">-</div>
                            <div style="text-align:center;margin-top:8px">
                                <span id="adherence-insight2" class="badge badge-primary">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h4 class="mb-16">Adherence Scale</h4>
                        <div style="display:flex;gap:12px;flex-wrap:wrap">
                            <div
                                style="flex:1;min-width:140px;background:var(--good-bg);border-radius:var(--radius-sm);padding:14px;border-left:3px solid var(--good)">
                                <div class="fw-700 text-good mb-4">üü¢ Good (‚â•80%)</div>
                                <div style="font-size:0.82rem;color:var(--text-secondary)">Excellent adherence ‚Äî keep it
                                    up!</div>
                            </div>
                            <div
                                style="flex:1;min-width:140px;background:var(--mod-bg);border-radius:var(--radius-sm);padding:14px;border-left:3px solid var(--moderate)">
                                <div class="fw-700 text-moderate mb-4">üü° Moderate (60‚Äì79%)</div>
                                <div style="font-size:0.82rem;color:var(--text-secondary)">Set reminders to improve!
                                </div>
                            </div>
                            <div
                                style="flex:1;min-width:140px;background:var(--poor-bg);border-radius:var(--radius-sm);padding:14px;border-left:3px solid var(--poor)">
                                <div class="fw-700 text-poor mb-4">üî¥ Poor (&lt;60%)</div>
                                <div style="font-size:0.82rem;color:var(--text-secondary)">Contact your doctor or
                                    caregiver.</div>
                            </div>
                        </div>
                    </div>
                </section>

            </main>
        </div><!-- end .main-content -->
    </div><!-- end .dashboard-shell -->

    <script src="scripts/auth.js"></script>
    <script src="scripts/notifications.js"></script>
    <script src="scripts/patient.js"></script>
    <script>
        /** Wire up Appointments tab-bar (Upcoming / Missed / Attended) */
        document.addEventListener('DOMContentLoaded', () => {
            AH.initTabs();

            /* Update EC count stat after load */
            setTimeout(() => {
                const contacts = AH.getItem(AH.KEYS.EMERGENCY_CONTACTS)
                    .filter(c => c.patientId === (AH.getSession()?.userId));
                const el = document.getElementById('stat-ec-count');
                if (el) el.textContent = contacts.length;
            }, 200);
        });
    </script>
</body>

</html>